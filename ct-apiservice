kind: Service
apiVersion: v1
metadata:
  name: ct-api-service
  namespace: command-center
  labels:
    app: command-center
    component: ct-api
    tier: api
  annotations:
    service.beta.kubernetes.io/azure-load-balancer-internal: "true"  # This annotation makes it an internal load balancer
spec:
  type: LoadBalancer  # Change the type to LoadBalancer to create an external IP
  loadBalancerIP: 172.16.113.196  # Static IP within your VNet range for stability
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
  selector:
    app: command-center
    component: ct-api
    tier: api
  sessionAffinity: None
  ipFamilies:
    - IPv4
  ipFamilyPolicy: SingleStack
  internalTrafficPolicy: Cluster
